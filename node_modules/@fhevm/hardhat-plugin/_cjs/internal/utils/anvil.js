"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.anvilNodeInfo = anvilNodeInfo;
exports.isAnvilProvider = isAnvilProvider;
const errors_1 = require("hardhat/internal/core/errors");
const errors_2 = require("hardhat/internal/core/providers/errors");
async function anvilNodeInfo(provider) {
    const res = await provider.send("anvil_nodeInfo", []);
    return res;
}
async function isAnvilProvider(networkName, provider) {
    if (networkName === "hardhat") {
        return false;
    }
    try {
        const nodeInfo = await anvilNodeInfo(provider);
        if (!("environment" in nodeInfo)) {
            return false;
        }
        const env = nodeInfo.environment;
        if (!("chainId" in env)) {
            return false;
        }
        return true;
    }
    catch (e) {
        if (errors_2.ProviderError.isProviderError(e)) {
            if (e.code === -32004) {
                return false;
            }
            throw e;
        }
        else if (e instanceof errors_1.HardhatError) {
            if (e.number === 108) {
                throw e;
            }
        }
        return false;
    }
}
//# sourceMappingURL=anvil.js.map